import com.aallam.openai.api.chat.ChatRole;
import kotlinx.datetime.Instant;

CREATE TABLE ChatMessageEntity (
  id TEXT NOT NULL PRIMARY KEY,
  content TEXT NOT NULL,
  role TEXT AS ChatRole NOT NULL,
  createdAt TEXT AS Instant NOT NULL
);

getAllChatMessages:
SELECT *
FROM ChatMessageEntity
ORDER BY createdAt ASC;

getChatMessageById:
SELECT *
FROM ChatMessageEntity
WHERE id = ?;

upsertChatMessage:
INSERT OR REPLACE INTO ChatMessageEntity(id, content, role, createdAt)
VALUES (?, ?, ?, ?);

deleteAllMessages:
DELETE FROM ChatMessageEntity;
